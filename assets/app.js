angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationController",["$scope",function(o){o.$on("login",function(t,e){o.currentUser=e})}]),angular.module("app").controller("LoginController",["$scope","UserService",function(o,t){o.login=function(e,n){t.login(e,n).then(function(t){o.$emit("login",t.data)})}}]),angular.module("app").controller("PostsController",["$scope","PostsService",function(o,t){t.fetch().success(function(t){o.posts=t}),o.addPost=function(){o.postBody&&t.create({username:"jayplabs",body:o.postBody}).success(function(t){o.posts.unshift(t),o.postBody=null})}}]),angular.module("app").service("PostsService",["$http",function(o){this.fetch=function(){return o.get("/api/posts")},this.create=function(t){return o.post("/api/posts",t)}}]),angular.module("app").config(["$routeProvider",function(o){o.when("/",{controller:"PostsController",templateUrl:"posts.html"}).when("/register",{controller:"RegisterController",templateUrl:"register.html"}).when("/login",{controller:"LoginController",templateUrl:"login.html"})}]),angular.module("app").service("UserService",["$http",function(o){var t=this;t.getUser=function(){return o.get("/api/users")},t.login=function(e,n){return o.post("/api/sessions",{username:e,password:n}).then(function(e){return t.token=e.data,o.defaults.headers.common["X-Auth"]=e.data,t.getUser()})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmNvbnRyb2xsZXIuanMiLCJsb2dpbi5jb250cm9sbGVyLmpzIiwicG9zdHMuY29udHJvbGxlci5qcyIsInBvc3RzLnNlcnZpY2UuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnNlcnZpY2UuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkb24iLCJfIiwidXNlciIsImN1cnJlbnRVc2VyIiwiVXNlclNlcnZpY2UiLCJsb2dpbiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJ0aGVuIiwicmVzcG9uc2UiLCIkZW1pdCIsImRhdGEiLCJQb3N0c1NlcnZpY2UiLCJmZXRjaCIsInN1Y2Nlc3MiLCJwb3N0cyIsImFkZFBvc3QiLCJwb3N0Qm9keSIsImNyZWF0ZSIsImJvZHkiLCJwb3N0IiwidW5zaGlmdCIsInNlcnZpY2UiLCIkaHR0cCIsInRoaXMiLCJnZXQiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImdldFVzZXIiLCJ0b2tlbiIsImRlZmF1bHRzIiwiaGVhZGVycyIsImNvbW1vbiJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsT0FDQSxZQ0RBRCxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEseUJBQUEsU0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxJQUFBLFFBQUEsU0FBQUMsRUFBQUMsR0FDQUgsRUFBQUksWUFBQUQsT0NIQU4sUUFBQUMsT0FBQSxPQUNBQyxXQUFBLG1CQUFBLFNBQUEsY0FBQSxTQUFBQyxFQUFBSyxHQUNBTCxFQUFBTSxNQUFBLFNBQUFDLEVBQUFDLEdBQ0FILEVBQUFDLE1BQUFDLEVBQUFDLEdBQ0FDLEtBQUEsU0FBQUMsR0FDQVYsRUFBQVcsTUFBQSxRQUFBRCxFQUFBRSxZQ0xBZixRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsbUJBQUEsU0FBQSxlQUFBLFNBQUFDLEVBQUFhLEdBQ0FBLEVBQUFDLFFBQUFDLFFBQUEsU0FBQUMsR0FDQWhCLEVBQUFnQixNQUFBQSxJQUdBaEIsRUFBQWlCLFFBQUEsV0FDQWpCLEVBQUFrQixVQUNBTCxFQUFBTSxRQUNBWixTQUFBLFdBQ0FhLEtBQUFwQixFQUFBa0IsV0FDQUgsUUFBQSxTQUFBTSxHQUNBckIsRUFBQWdCLE1BQUFNLFFBQUFELEdBQ0FyQixFQUFBa0IsU0FBQSxXQ2JBckIsUUFBQUMsT0FBQSxPQUNBeUIsUUFBQSxnQkFBQSxRQUFBLFNBQUFDLEdBQ0FDLEtBQUFYLE1BQUEsV0FDQSxNQUFBVSxHQUFBRSxJQUFBLGVBRUFELEtBQUFOLE9BQUEsU0FBQUUsR0FDQSxNQUFBRyxHQUFBSCxLQUFBLGFBQUFBLE9DTkF4QixRQUFBQyxPQUFBLE9BQ0E2QixRQUFBLGlCQUFBLFNBQUFDLEdBQ0FBLEVBQ0FDLEtBQUEsS0FBQTlCLFdBQUEsa0JBQUErQixZQUFBLGVBQ0FELEtBQUEsYUFBQTlCLFdBQUEscUJBQUErQixZQUFBLGtCQUNBRCxLQUFBLFVBQUE5QixXQUFBLGtCQUFBK0IsWUFBQSxrQkNMQWpDLFFBQUFDLE9BQUEsT0FDQXlCLFFBQUEsZUFBQSxRQUFBLFNBQUFDLEdBQ0EsR0FBQUQsR0FBQUUsSUFDQUYsR0FBQVEsUUFBQSxXQUNBLE1BQUFQLEdBQUFFLElBQUEsZUFHQUgsRUFBQWpCLE1BQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBZ0IsR0FBQUgsS0FBQSxpQkFDQWQsU0FBQUEsRUFBQUMsU0FBQUEsSUFDQUMsS0FBQSxTQUFBQyxHQUdBLE1BRkFhLEdBQUFTLE1BQUF0QixFQUFBRSxLQUNBWSxFQUFBUyxTQUFBQyxRQUFBQyxPQUFBLFVBQUF6QixFQUFBRSxLQUNBVyxFQUFBUSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuICAgICduZ1JvdXRlJ1xuXSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUpIHtcbiAgICAkc2NvcGUuJG9uKCdsb2dpbicsIGZ1bmN0aW9uIChfLCB1c2VyKSB7XG4gICAgICAgICRzY29wZS5jdXJyZW50VXNlciA9IHVzZXJcbiAgICB9KVxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU2VydmljZSkge1xuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICBVc2VyU2VydmljZS5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdsb2dpbicsIHJlc3BvbnNlLmRhdGEpXG4gICAgICAgIH0pXG4gICAgfVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoJ1Bvc3RzQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgUG9zdHNTZXJ2aWNlKSB7XG4gICAgUG9zdHNTZXJ2aWNlLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbiAocG9zdHMpIHtcbiAgICAgICAgJHNjb3BlLnBvc3RzID0gcG9zdHNcbiAgICB9KVxuXG4gICAgJHNjb3BlLmFkZFBvc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkc2NvcGUucG9zdEJvZHkpIHtcbiAgICAgICAgICAgIFBvc3RzU2VydmljZS5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAnamF5cGxhYnMnLFxuICAgICAgICAgICAgICAgIGJvZHk6ICRzY29wZS5wb3N0Qm9keVxuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAocG9zdCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5wb3N0cy51bnNoaWZ0KHBvc3QpXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RCb2R5ID0gbnVsbFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdQb3N0c1NlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgICB0aGlzLmZldGNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKVxuICAgIH1cbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKHBvc3QpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMnLCBwb3N0KVxuICAgIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAud2hlbignLycsIHsgY29udHJvbGxlcjogJ1Bvc3RzQ29udHJvbGxlcicsIHRlbXBsYXRlVXJsOiAncG9zdHMuaHRtbCd9KVxuICAgIC53aGVuKCcvcmVnaXN0ZXInLCB7Y29udHJvbGxlcjogJ1JlZ2lzdGVyQ29udHJvbGxlcicsIHRlbXBsYXRlVXJsOiAncmVnaXN0ZXIuaHRtbCd9KVxuICAgIC53aGVuKCcvbG9naW4nLCB7Y29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsIHRlbXBsYXRlVXJsOiAnbG9naW4uaHRtbCd9KVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1VzZXJTZXJ2aWNlJywgZnVuY3Rpb24gKCRodHRwKSB7XG4gICAgdmFyIHNlcnZpY2UgPSB0aGlzXG4gICAgc2VydmljZS5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJylcbiAgICB9XG5cbiAgICBzZXJ2aWNlLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucycsIHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6IHBhc3N3b3JkXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBzZXJ2aWNlLnRva2VuID0gcmVzcG9uc2UuZGF0YVxuICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gcmVzcG9uc2UuZGF0YVxuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2UuZ2V0VXNlcigpXG4gICAgICAgIH0pXG4gICAgfVxufSlcbiJdfQ==
